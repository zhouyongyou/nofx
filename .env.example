# NOFX Environment Variables Template
# Copy this file to .env and modify the values as needed

# Git Branch (Git åˆ†æ”¯åç¨±)
# Used for frontend branch label display, injected during Docker build
# Set this to your current branch name (e.g., main, z-dev-v2, z-dev-v3)
# If running a fork or experimental branch, the UI will show fork attribution
GIT_BRANCH=main

# Ports Configuration
# Backend API server port (internal: 8080, external: configurable)
NOFX_BACKEND_PORT=8080

# Frontend web interface port (Nginx listens on port 80 internally)
NOFX_FRONTEND_PORT=3000

# Timezone Setting
# System timezone for container time synchronization
NOFX_TIMEZONE=Asia/Shanghai

# ============================================================================
# ğŸŒ CORS Configuration (Smart Auto-Detection with Startup Warnings)
# ============================================================================

# CORS Allowed Origins
# Comma-separated list of frontend URLs allowed to access the backend API
# Default allowed (hardcoded): http://localhost:3000, http://localhost:5173
#
# ğŸ‰ NEW: Smart CORS with Startup Warnings
# =========================================
# The system now provides clear warnings at startup if CORS is misconfigured!
#
# In development mode (ENVIRONMENT != production), the system is EXTREMELY permissive:
#
# âœ… Automatically allows:
#   - localhost & 127.0.0.1 (any port)
#   - .local domains (e.g., nofx.local, myserver.local - mDNS/Bonjour)
#   - Private IPs (RFC 1918):
#       â€¢ 192.168.0.0/16 (192.168.0.0 - 192.168.255.255)
#       â€¢ 10.0.0.0/8     (10.0.0.0 - 10.255.255.255)
#       â€¢ 172.16.0.0/12  (172.16.0.0 - 172.31.255.255)
#   - Any other origin (logs warning but allows access)
#
# âœ… This means in development:
#   - NO configuration needed for mobile access (192.168.x.x)
#   - NO configuration needed for .local domains
#   - NO configuration needed for ANY local network access
#   - System just logs a warning if origin is not in standard ranges
#
# âœ… Production mode (ENVIRONMENT=production):
#   - Strictly enforces whitelist
#   - Rejects any origin not explicitly listed
#   - âš ï¸  Shows BIG WARNING at startup if CORS is not configured!
#
# Startup Warning Example:
# ========================
# If you set ENVIRONMENT=production but forget to configure CORS, you'll see:
#
#   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
#   â•‘  âš ï¸  è­¦å‘Šï¼šç”Ÿç”¢æ¨¡å¼ä¸‹æœªé…ç½® CORSï¼                         â•‘
#   â•‘  é æœŸè¡Œç‚ºï¼š                                               â•‘
#   â•‘    âœ… localhost:3000, localhost:5173 å¯æ­£å¸¸è¨ªå•            â•‘
#   â•‘    âŒ å…¶ä»–æ‰€æœ‰ä¾†æºå°‡è¢« 403 æ‹’çµ•                           â•‘
#   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# This prevents silent failures and makes debugging easier!
#
# When to configure CORS_ALLOWED_ORIGINS?
# ========================================
# 1. Production deployment (ENVIRONMENT=production) - REQUIRED
#    â†’ You MUST list all allowed frontend URLs (system will warn if missing)
#
# 2. Want to test production-like strict CORS in dev - OPTIONAL
#    â†’ Uncomment and list specific origins
#
# Examples:
# ---------
# Single production domain:
#   CORS_ALLOWED_ORIGINS=https://trading.example.com
#
# Multiple production origins:
#   CORS_ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
#
# Development + custom domain:
#   CORS_ALLOWED_ORIGINS=http://custom-domain.com:3000
#
# âš ï¸ Disable CORS Entirely (Nuclear Option - Unsafe!)
# ===================================================
# For completely isolated internal networks or local testing only:
#   DISABLE_CORS=true
#
# WARNING: This allows ALL origins! Never use in production or internet-facing servers!
#
# For most development scenarios, leave both commented out:
# CORS_ALLOWED_ORIGINS=
# DISABLE_CORS=

# ============================================================================
# ğŸ” Security & Encryption Configuration
# ============================================================================

# Data Encryption Key (REQUIRED - System will NOT start without this!)
# Used to encrypt sensitive data (API keys, private keys) stored in database
#
# âš ï¸  IMPORTANT: You MUST replace the example value below!
#     The system will refuse to start if you use the example key.
#
# Generate with: openssl rand -base64 32
# Or use the setup script: ./scripts/setup-env.sh
#
# Example error if not configured:
#   âŒ å®‰å…¨é…ç½®æ£€æŸ¥å¤±è´¥: æ£€æµ‹åˆ°ç¤ºä¾‹å¯†é’¥ï¼Œè¯·ç”ŸæˆçœŸå®å¯†é’¥
#
DATA_ENCRYPTION_KEY=PLEASE_GENERATE_YOUR_OWN_KEY_HERE

# Master Key (Optional - for dual encryption)
# If set, provides an additional encryption layer
# NOFX_MASTER_KEY=

# JWT Secret (for user authentication)
# Generate with: openssl rand -base64 64
# JWT_SECRET=

# CSRF Protection (Cross-Site Request Forgery)
# Protects against Cross-Site Request Forgery attacks
# When enabled, all POST/PUT/DELETE requests require a valid CSRF token
#
# Options:
#   false - Disabled (recommended for development, eliminates Docker warnings)
#   true  - Enabled (recommended for production environments)
#
# Default: false (if not set, system assumes disabled but Docker shows warning)
# To eliminate the warning, explicitly set to 'false':
ENABLE_CSRF=false
#
# For production, change to:
# ENABLE_CSRF=true

# ============================================================================
# ğŸ”„ Reverse Proxy Configuration (HTTPS/Nginx/Caddy/Traefik)
# ============================================================================

# Trust Proxy Headers (X-Forwarded-For, X-Real-IP)
# Enable when running behind a reverse proxy (Nginx, Caddy, Traefik, etc.)
# This allows the backend to correctly identify client IPs for rate limiting
#
# Options:
#   false - Disabled (default, safe for direct connections)
#   true  - Enabled (required when behind reverse proxy)
#
# Default: false
# TRUST_PROXY=false
#
# For reverse proxy deployments (Nginx + HTTPS), set:
# TRUST_PROXY=true

# Cookie Secure Flag (HTTPS-only cookies)
# When using HTTPS (reverse proxy with SSL), the system will:
# - Set Secure flag on cookies (only sent over HTTPS)
# - Use SameSite=Lax (compatible with reverse proxy)
#
# This is automatically enabled when ENVIRONMENT=production
# No manual configuration needed if ENVIRONMENT is set correctly

# ============================================================================
# ğŸ“Š Market Data API Configuration (Optional - Free Tier)
# ============================================================================

# Alpha Vantage API Key (Optional)
# Used for US stock market data (S&P 500 status) to enhance AI decision context
# Free tier: 500 API calls/day (sufficient for trading bot usage)
# Register free API key at: https://www.alphavantage.co/support/#api-key
# If not set, the system will skip US stock data (VIX and Binance data still work)
# ALPHA_VANTAGE_API_KEY=

